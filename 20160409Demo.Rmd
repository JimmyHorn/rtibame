---
title: "20160409Demo"
author: "David Chiu"
date: "2016年4月9日"
output: html_document
---

### GET appledaily
```{r}
library(httr)
res <- GET('http://www.appledaily.com.tw/realtimenews/section/new/')
res

```

### POST THSRC
```{r}
library(httr)
url <- "https://www.thsrc.com.tw/tw/TimeTable/SearchResult"
payload <- list(
  StartStation='977abb69-413a-4ccf-a109-0272c24fd490',
  EndStation='fbd828d8-b1da-4b06-a3bd-680cdca4d2cd',
  SearchDate='2016/04/09',
  SearchTime='15:00',
  SearchWay='DepartureInMandarin'
)

res<-POST(url, body=payload, encode="form")
res

```


### Markdown Sample

# heading 1
## heading 2
### heading 3

- list item
    1. item1
    2. item2
    3. item3
- list item2

### To understand Markdown
- http://markdown.tw/

### List Operation
```{r}
p1 <- list(height = 170, weight = 60, name ="annie" )
p1
p1$height

```

### GET Taiwan Railroad

```{r}
library(httr)
qoo <- GET('http://twtraffic.tra.gov.tw/twrail/SearchResult.aspx?searchtype=0&searchdate=2016/04/09&fromstation=1810&tostation=1008&trainclass=%271100%27,%271101%27,%271102%27,%271107%27,%271108%27,%271110%27,%271120%27&fromtime=0600&totime=2359')
qoo

```


### magrittr

```{r}

data(iris)
?iris
View(iris)
a <- head(iris)
b <- a[3,]
c<-b['Sepal.Length']
tail(c,1)

tail(head(iris)[3,]['Sepal.Length'],1)



#install.packages("magrittr")
library(magrittr)
iris %>% head() %>% .[3,] %>% .['Sepal.Length'] %>% tail(1)
```

### rvest
```{r}
library(httr)
library(rvest)
res <- GET('http://www.appledaily.com.tw/realtimenews/section/new/')
content(res) %>% html_nodes('time') %>% .[1]
content(res) %>% html_nodes('h1.dddd time') 
content(res) %>% html_nodes('#maincontent > div.thoracis > div.abdominis.rlby.clearmen > h1 > time') %>% html_text()

```


